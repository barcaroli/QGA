<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Airline hubs â€¢ QGA</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Airline hubs">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">QGA</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/QGA.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/airlines_hubs.html">Airline hubs</a>
    </li>
    <li>
      <a href="../articles/clustering.html">Clustering</a>
    </li>
    <li>
      <a href="../articles/functionMax.html">Maximum of a function</a>
    </li>
    <li>
      <a href="../articles/TSP.html">Traveller Salesman</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/barcaroli/QGA/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Airline hubs</h1>
                        <h4 data-toc-skip class="author">Giulio
Barcaroli</h4>
            
            <h4 data-toc-skip class="date">2024-09-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/barcaroli/QGA/blob/main/vignettes/airlines_hubs.Rmd" class="external-link"><code>vignettes/airlines_hubs.Rmd</code></a></small>
      <div class="hidden name"><code>airlines_hubs.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="airline-hubs">Airline hubs<a class="anchor" aria-label="anchor" href="#airline-hubs"></a>
</h2>
<p>In this example, we show how, With the Quantum Genetic Algorithm, it
is possible to determine the most convenient hubs, given a set of 25 USA
airports.</p>
<div class="section level3">
<h3 id="prepare-data">Prepare data<a class="anchor" aria-label="anchor" href="#prepare-data"></a>
</h3>
<p>As input data, we consider the 25 airports, with their geographical
coordinates:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Airlines_cities.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cities</span><span class="op">)</span></span>
<span><span class="co">#&gt;    ID City     Lat      Long</span></span>
<span><span class="co">#&gt; 1   1  ATL 33.7490  -84.3880</span></span>
<span><span class="co">#&gt; 2   2  BWI 37.2904  -76.6122</span></span>
<span><span class="co">#&gt; 3   3  BOS 42.3601  -71.0589</span></span>
<span><span class="co">#&gt; 4   4  ORD 41.8781  -87.6298</span></span>
<span><span class="co">#&gt; 5   5  CVG 39.1031  -84.5120</span></span>
<span><span class="co">#&gt; 6   6  CLE 41.4993  -81.6944</span></span>
<span><span class="co">#&gt; 7   7  DFW 32.7767  -96.7970</span></span>
<span><span class="co">#&gt; 8   8  DEN 39.7392 -104.9903</span></span>
<span><span class="co">#&gt; 9   9  DET 43.7314  -83.0458</span></span>
<span><span class="co">#&gt; 10 10  IAH 29.7604  -95.3698</span></span>
<span><span class="co">#&gt; 11 11  MCI 39.0997  -94.5786</span></span>
<span><span class="co">#&gt; 12 12  LAX 34.0522 -118.2437</span></span>
<span><span class="co">#&gt; 13 13  MEM 35.1495  -90.0490</span></span>
<span><span class="co">#&gt; 14 14  MIA 25.7617  -80.1918</span></span>
<span><span class="co">#&gt; 15 15  MSP 44.9778  -93.2650</span></span>
<span><span class="co">#&gt; 16 16  MSY 29.9511  -90.0715</span></span>
<span><span class="co">#&gt; 17 17  LGA 40.7128  -74.0060</span></span>
<span><span class="co">#&gt; 18 18  PHL 39.9526  -74.1652</span></span>
<span><span class="co">#&gt; 19 19  PHX 33.4484 -112.0740</span></span>
<span><span class="co">#&gt; 20 20  PIT 39.4406  -77.9959</span></span>
<span><span class="co">#&gt; 21 21  STL 38.6270  -90.1994</span></span>
<span><span class="co">#&gt; 22 22  SFO 37.6213 -122.3790</span></span>
<span><span class="co">#&gt; 23 23  SEA 47.6062 -122.3321</span></span>
<span><span class="co">#&gt; 24 24  TPA 27.9506  -82.4572</span></span>
<span><span class="co">#&gt; 25 25  DCA 35.5072  -76.0369</span></span></code></pre></div>
<p>In addition, we get two square matrices. The first one contains the
costs:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cost</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Airlines_cost.csv"</span>,header<span class="op">=</span><span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">cost</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    25 obs. of  25 variables:</span></span>
<span><span class="co">#&gt;  $ V1 : num  0 577 946 598 374 ...</span></span>
<span><span class="co">#&gt;  $ V2 : num  577 0 370 613 429 ...</span></span>
<span><span class="co">#&gt;  $ V3 : num  946 370 0 858 750 ...</span></span>
<span><span class="co">#&gt;  $ V4 : num  598 613 858 0 255 ...</span></span>
<span><span class="co">#&gt;  $ V5 : num  374 429 750 255 0 ...</span></span>
<span><span class="co">#&gt;  $ V6 : num  560 313 556 311 226 ...</span></span>
<span><span class="co">#&gt;  $ V7 : num  709 1196 1541 790 794 ...</span></span>
<span><span class="co">#&gt;  $ V8 : num  1208 1502 1765 907 1080 ...</span></span>
<span><span class="co">#&gt;  $ V9 : num  604 406 621 237 239 ...</span></span>
<span><span class="co">#&gt;  $ V10: num  695 1242 1603 932 880 ...</span></span>
<span><span class="co">#&gt;  $ V11: num  681 960 1251 406 533 ...</span></span>
<span><span class="co">#&gt;  $ V12: num  1937 2318 2600 1742 1890 ...</span></span>
<span><span class="co">#&gt;  $ V13: num  332 787 1137 486 402 ...</span></span>
<span><span class="co">#&gt;  $ V14: num  593 950 1267 1187 947 ...</span></span>
<span><span class="co">#&gt;  $ V15: num  909 939 1125 346 599 ...</span></span>
<span><span class="co">#&gt;  $ V16: num  426 1000 1368 830 700 ...</span></span>
<span><span class="co">#&gt;  $ V17: num  756 179 190 720 578 ...</span></span>
<span><span class="co">#&gt;  $ V18: num  672.6 96.3 274.3 675.3 512.4 ...</span></span>
<span><span class="co">#&gt;  $ V19: num  1590 2000 2299 1447 1571 ...</span></span>
<span><span class="co">#&gt;  $ V20: num  527 211 494 404 256 ...</span></span>
<span><span class="co">#&gt;  $ V21: num  483 736 1043 256 307 ...</span></span>
<span><span class="co">#&gt;  $ V22: num  2141 2456 2703 1854 2036 ...</span></span>
<span><span class="co">#&gt;  $ V23: num  2184 2340 2504 1733 1967 ...</span></span>
<span><span class="co">#&gt;  $ V24: num  408 844 1189 1006 775 ...</span></span>
<span><span class="co">#&gt;  $ V25: num  540.7 36.5 405.8 592 399.2 ...</span></span></code></pre></div>
<p>that is, for each origin airport, the unit cost (the price of the
ticket), necessary to reach the destination airport.</p>
<p>The second one is related to the flows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"Airlines_flow.csv"</span>,header<span class="op">=</span><span class="cn">F</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    25 obs. of  25 variables:</span></span>
<span><span class="co">#&gt;  $ V1 : num  0 6469 7629 20036 4690 ...</span></span>
<span><span class="co">#&gt;  $ V2 : num  6469 0 12999 13692 3322 ...</span></span>
<span><span class="co">#&gt;  $ V3 : num  7629 12999 0 35135 5956 ...</span></span>
<span><span class="co">#&gt;  $ V4 : num  20036 13692 35135 0 19094 ...</span></span>
<span><span class="co">#&gt;  $ V5 : num  4690 3322 5956 19094 0 ...</span></span>
<span><span class="co">#&gt;  $ V6 : num  6194 5576 14121 35119 7284 ...</span></span>
<span><span class="co">#&gt;  $ V7 : num  11688 3878 5951 21423 3102 ...</span></span>
<span><span class="co">#&gt;  $ V8 : num  2243 3202 5768 27342 1562 ...</span></span>
<span><span class="co">#&gt;  $ V9 : num  8857 6699 16578 51341 7180 ...</span></span>
<span><span class="co">#&gt;  $ V10: num  7248 4198 4242 15826 1917 ...</span></span>
<span><span class="co">#&gt;  $ V11: num  3559 2454 3365 28537 2253 ...</span></span>
<span><span class="co">#&gt;  $ V12: num  9221 7975 22254 65387 5951 ...</span></span>
<span><span class="co">#&gt;  $ V13: num  10099 1186 1841 12980 1890 ...</span></span>
<span><span class="co">#&gt;  $ V14: num  22866 7443 23665 44097 7097 ...</span></span>
<span><span class="co">#&gt;  $ V15: num  3388 1162 6517 51525 2009 ...</span></span>
<span><span class="co">#&gt;  $ V16: num  9986 5105 3541 14354 1340 ...</span></span>
<span><span class="co">#&gt;  $ V17: num  46618 24817 205088 172895 25303 ...</span></span>
<span><span class="co">#&gt;  $ V18: num  11639 6532 37669 37305 6031 ...</span></span>
<span><span class="co">#&gt;  $ V19: num  1380 806 2885 15418 1041 ...</span></span>
<span><span class="co">#&gt;  $ V20: num  5261 8184 13200 26221 4128 ...</span></span>
<span><span class="co">#&gt;  $ V21: num  5985 3896 7116 42303 5452 ...</span></span>
<span><span class="co">#&gt;  $ V22: num  6731 7333 17165 35303 3344 ...</span></span>
<span><span class="co">#&gt;  $ V23: num  2704 3719 4284 13618 1067 ...</span></span>
<span><span class="co">#&gt;  $ V24: num  12250 2015 8085 17580 4608 ...</span></span>
<span><span class="co">#&gt;  $ V25: num  16132 565 51895 40708 7050 ...</span></span></code></pre></div>
<p>that is, for each origin airport, the estimated number of passengers
that want to reach the destination airport.</p>
</div>
<div class="section level3">
<h3 id="optimization">Optimization<a class="anchor" aria-label="anchor" href="#optimization"></a>
</h3>
<p>We want to minimize the total cost of the optimal solution, given by
the product of the flows muliplied by the unit cost, to determine which
could be the three more convenient hubs for the 25 airports.</p>
<p>We define the fitness function consequently:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">airline_hub</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">solution</span>,<span class="va">input</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">cost</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">cost</span></span>
<span>  <span class="va">flow</span> <span class="op">&lt;-</span> <span class="va">input</span><span class="op">$</span><span class="va">flow</span></span>
<span>  <span class="va">penalization</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cost</span><span class="op">)</span><span class="op">*</span><span class="fl">0.0005</span></span>
<span>  <span class="va">obj</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">cost</span><span class="op">[</span>,<span class="va">solution</span><span class="op">]</span> <span class="op">*</span> <span class="va">flow</span><span class="op">[</span>,<span class="va">solution</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">min</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">cost</span><span class="op">)</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">solution</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">obj</span> <span class="op">&lt;-</span> <span class="va">obj</span> <span class="op">-</span> <span class="va">penalization</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="co"># cat("\nSolution:",solution,"  obj: ",obj)</span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Some remarks:</p>
<ol style="list-style-type: decimal">
<li><p>this function will receive, as input, the cost matrix and the
flow matrix;</p></li>
<li><p>to evaluate the current solution, in both matrices (cost and
flow) we select the three columns corresponding to the three hubs, and
calculate the sum of the total costs for each origin airport to reach
the candidate hub, selecting the minimum (the minus sign is due to the
fact that we want to minimize the value of the objective
function);</p></li>
<li><p>a penalization is introduced to eliminate the solutions with a
number of hubs lower than three.</p></li>
</ol>
<p>We can now proceed with the optimization. Note that we set the value
of the genome equal to 3 (the number of the desired hubs), and the
number of the values to be attributed to each element of the genome is
set equal to the number of the airports (25).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cost<span class="op">=</span><span class="va">cost</span>,flow<span class="op">=</span><span class="va">flow</span><span class="op">)</span></span>
<span><span class="va">popsize</span> <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="va">Genome</span> <span class="op">=</span> <span class="fl">3</span> <span class="co"># Number of desired hubs</span></span>
<span><span class="va">nvalues_sol</span> <span class="op">=</span> <span class="fl">25</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">4321</span><span class="op">)</span></span>
<span><span class="va">solutionQGA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/QGA.html">QGA</a></span><span class="op">(</span></span>
<span>                <span class="va">popsize</span>,</span>
<span>                generation_max <span class="op">=</span> <span class="fl">200</span>,</span>
<span>                <span class="va">nvalues_sol</span>,</span>
<span>                <span class="va">Genome</span>,</span>
<span>                thetainit <span class="op">=</span> <span class="fl">3.1415926535</span> <span class="op">*</span> <span class="fl">0.025</span>,</span>
<span>                thetaend <span class="op">=</span> <span class="fl">3.1415926535</span> <span class="op">*</span> <span class="fl">0.005</span>,</span>
<span>                pop_mutation_rate_init <span class="op">=</span> <span class="fl">3</span><span class="op">/</span><span class="op">(</span><span class="va">popsize</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                pop_mutation_rate_end <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">popsize</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                mutation_rate_init <span class="op">=</span> <span class="fl">3</span><span class="op">/</span><span class="op">(</span><span class="va">Genome</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                mutation_rate_end <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">Genome</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>                mutation_flag <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                plotting <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                progress <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                eval_fitness <span class="op">=</span> <span class="va">airline_hub</span>,</span>
<span>                eval_func_inputs <span class="op">=</span> <span class="va">input</span>,</span>
<span>                stop_iters <span class="op">=</span> <span class="fl">150</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  *** Best fitness:  -69.59383</span></span></code></pre></div>
<p><img src="airlines_hubs_files/figure-html/unnamed-chunk-5-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="analysis-of-the-solution">Analysis of the solution<a class="anchor" aria-label="anchor" href="#analysis-of-the-solution"></a>
</h3>
<p>The found solution:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">solution</span> <span class="op">&lt;-</span> <span class="va">solutionQGA</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">cities</span><span class="op">$</span><span class="va">City</span><span class="op">[</span><span class="va">solution</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "MEM" "LAX" "PHL"</span></span>
<span><span class="va">sol</span> <span class="op">&lt;-</span> <span class="va">cost</span><span class="op">[</span>,<span class="va">solution</span><span class="op">]</span> </span>
<span><span class="va">find_min_column</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">row</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.min</a></span><span class="op">(</span><span class="va">row</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">min_column_vector</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">sol</span>, <span class="fl">1</span>, <span class="va">find_min_column</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">min_column_vector</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 1 3 3 1 1 3 1 2 3 1 1 2 1 1 1 1 3 3 2 3 1 2 2 1 3</span></span>
<span><span class="va">cities</span><span class="op">$</span><span class="va">Hub</span> <span class="op">&lt;-</span> <span class="va">cities</span><span class="op">$</span><span class="va">City</span><span class="op">[</span><span class="va">solution</span><span class="op">]</span><span class="op">[</span><span class="va">min_column_vector</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cities</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">5</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;    City Hub</span></span>
<span><span class="co">#&gt; 1   ATL MEM</span></span>
<span><span class="co">#&gt; 2   BWI PHL</span></span>
<span><span class="co">#&gt; 3   BOS PHL</span></span>
<span><span class="co">#&gt; 4   ORD MEM</span></span>
<span><span class="co">#&gt; 5   CVG MEM</span></span>
<span><span class="co">#&gt; 6   CLE PHL</span></span>
<span><span class="co">#&gt; 7   DFW MEM</span></span>
<span><span class="co">#&gt; 8   DEN LAX</span></span>
<span><span class="co">#&gt; 9   DET PHL</span></span>
<span><span class="co">#&gt; 10  IAH MEM</span></span>
<span><span class="co">#&gt; 11  MCI MEM</span></span>
<span><span class="co">#&gt; 12  LAX LAX</span></span>
<span><span class="co">#&gt; 13  MEM MEM</span></span>
<span><span class="co">#&gt; 14  MIA MEM</span></span>
<span><span class="co">#&gt; 15  MSP MEM</span></span>
<span><span class="co">#&gt; 16  MSY MEM</span></span>
<span><span class="co">#&gt; 17  LGA PHL</span></span>
<span><span class="co">#&gt; 18  PHL PHL</span></span>
<span><span class="co">#&gt; 19  PHX LAX</span></span>
<span><span class="co">#&gt; 20  PIT PHL</span></span>
<span><span class="co">#&gt; 21  STL MEM</span></span>
<span><span class="co">#&gt; 22  SFO LAX</span></span>
<span><span class="co">#&gt; 23  SEA LAX</span></span>
<span><span class="co">#&gt; 24  TPA MEM</span></span>
<span><span class="co">#&gt; 25  DCA PHL</span></span></code></pre></div>
<p>We can plot them on a map:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">maps</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"maps"</span>, dependencies<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">maps</span><span class="op">)</span></span>
<span><span class="va">connections</span> <span class="op">&lt;-</span> <span class="va">cities</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">cities</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">City</span>, <span class="va">Lat</span>, <span class="va">Long</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hub"</span> <span class="op">=</span> <span class="st">"City"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Hub_Lat <span class="op">=</span> <span class="va">Lat.y</span>, Hub_Long <span class="op">=</span> <span class="va">Long.y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">City</span>, Lat <span class="op">=</span> <span class="va">Lat.x</span>, Long <span class="op">=</span> <span class="va">Long.x</span>, <span class="va">Hub</span>, <span class="va">Hub_Lat</span>, <span class="va">Hub_Long</span><span class="op">)</span></span>
<span><span class="va">hubs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">cities</span><span class="op">$</span><span class="va">Hub</span><span class="op">)</span></span>
<span><span class="va">hub_connections</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>Hub1 <span class="op">=</span> <span class="va">hubs</span>, Hub2 <span class="op">=</span> <span class="va">hubs</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Hub1</span> <span class="op">&lt;</span> <span class="va">Hub2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co"># Evita duplicati e auto-connessioni</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">cities</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">City</span>, <span class="va">Lat</span>, <span class="va">Long</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hub1"</span> <span class="op">=</span> <span class="st">"City"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Lat1 <span class="op">=</span> <span class="va">Lat</span>, Long1 <span class="op">=</span> <span class="va">Long</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">cities</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">City</span>, <span class="va">Lat</span>, <span class="va">Long</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Hub2"</span> <span class="op">=</span> <span class="st">"City"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Lat2 <span class="op">=</span> <span class="va">Lat</span>, Long2 <span class="op">=</span> <span class="va">Long</span><span class="op">)</span></span>
<span><span class="va">usa_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/map_data.html" class="external-link">map_data</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">usa_map</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"white"</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="fl">1.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">125</span>, <span class="op">-</span><span class="fl">66</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">ylim</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">connections</span>, </span>
<span>                        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Long</span>, y <span class="op">=</span> <span class="va">Lat</span>, xend <span class="op">=</span> <span class="va">Hub_Long</span>, yend <span class="op">=</span> <span class="va">Hub_Lat</span><span class="op">)</span>,</span>
<span>                        color <span class="op">=</span> <span class="st">"blue"</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">hub_connections</span>,</span>
<span>                        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Long1</span>, y <span class="op">=</span> <span class="va">Lat1</span>, xend <span class="op">=</span> <span class="va">Long2</span>, yend <span class="op">=</span> <span class="va">Lat2</span><span class="op">)</span>,</span>
<span>                        color <span class="op">=</span> <span class="st">"red"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cities</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Long</span>, y <span class="op">=</span> <span class="va">Lat</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"blue"</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cities</span><span class="op">[</span><span class="va">solution</span>,<span class="op">]</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Long</span>, y <span class="op">=</span> <span class="va">Lat</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cities</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Long</span>, y <span class="op">=</span> <span class="va">Lat</span>, label <span class="op">=</span> <span class="va">City</span><span class="op">)</span>, hjust <span class="op">=</span> <span class="fl">1</span>, vjust <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="va">gg</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Airlines hubs (cost minimization)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">0.5</span>, size <span class="op">=</span> <span class="fl">16</span>, face <span class="op">=</span> <span class="st">"bold"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gg</span><span class="op">)</span></span></code></pre></div>
<p><img src="airlines_hubs_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Giulio Barcaroli.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
